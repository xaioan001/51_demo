C51 COMPILER V9.60.0.0   FILTERING                                                         09/18/2025 19:01:29 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE FILTERING
OBJECT MODULE PLACED IN .\Objects\filtering.obj
COMPILER INVOKED BY: D:\work\KEIL\ARM\C51\BIN\C51.EXE DRIVER\filtering.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(.\APP;.\D
                    -RIVER;.\STC8HLib) DEBUG OBJECTEXTEND PRINT(.\Listings\filtering.lst) TABS(2) OBJECT(.\Objects\filtering.obj)

line level    source

   1          #include "type_def.h"
   2          #include "STC8G_H_ADC.h"
   3          #include "uart.h"
   4          #include <stdio.h>
   5          #include "STC8G_H_Delay.h"
   6          /**
   7          ***********************************************************
   8          * @brief   中值滤波算法
   9          * @param 
  10          * @return  
  11          ***********************************************************
  12          */
  13          u16 Median_Filter(u16 friler_arr[],u8 len)//中值滤波需要从小到大排序
  14          {
  15   1        u16 i=0;
  16   1        u32 total_sum=0;
  17   1        delay_ms(1);
  18   1        for(i=0;i<len;i++)
  19   1        {
  20   2            friler_arr[i] = Get_ADCResult(0);
  21   2        }
  22   1        sort(friler_arr,len);//数值排序
  23   1        // 累加中间30个值
  24   1        for(i = 0; i < 30; i++)
  25   1        {
  26   2            total_sum += friler_arr[10 + i];
  27   2            //printf("sumaaa: %u\n", friler_arr[10 + i]);
  28   2            //printf("total_sum1: %lu\n", total_sum);
  29   2        }
  30   1          
  31   1          // 计算平均值
  32   1          total_sum = total_sum / 30;
  33   1         
  34   1         //printf("total_sum2: %lu\n", total_sum);
  35   1          return (u16)total_sum;
  36   1      
  37   1      }
  38          
  39          
  40          
  41          
  42          
  43          
  44          
  45          
  46          
  47          
  48          
  49          
  50          
  51          
  52          
  53          
  54          
C51 COMPILER V9.60.0.0   FILTERING                                                         09/18/2025 19:01:29 PAGE 2   

  55          
  56          
  57          
  58          
  59          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    301    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----      10
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
