C51 COMPILER V9.60.0.0   STC8H_RTC_ISR                                                     09/18/2025 19:01:35 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE STC8H_RTC_ISR
OBJECT MODULE PLACED IN .\Objects\STC8H_RTC_Isr.obj
COMPILER INVOKED BY: D:\work\KEIL\ARM\C51\BIN\C51.EXE ..\TEST\STC8HLib\STC8H_RTC_Isr.c LARGE OPTIMIZE(8,SPEED) BROWSE IN
                    -CDIR(.\APP;.\DRIVER;.\STC8HLib) DEBUG OBJECTEXTEND PRINT(.\Listings\STC8H_RTC_Isr.lst) TABS(2) OBJECT(.\Objects\STC8H_RT
                    -C_Isr.obj)

line level    source

   1          /*---------------------------------------------------------------------*/
   2          /* --- STC MCU Limited ------------------------------------------------*/
   3          /* --- STC 1T Series MCU Demo Programme -------------------------------*/
   4          /* --- Mobile: (86)13922805190 ----------------------------------------*/
   5          /* --- Fax: 86-0513-55012956,55012947,55012969 ------------------------*/
   6          /* --- Tel: 86-0513-55012928,55012929,55012966 ------------------------*/
   7          /* --- Web: www.STCAI.com ---------------------------------------------*/
   8          /* --- BBS: www.STCAIMCU.com  -----------------------------------------*/
   9          /* --- QQ:  800003751 -------------------------------------------------*/
  10          /* 如果要在程序中使用此代码,请在程序中注明使用了STC的资料及程序            */
  11          /*---------------------------------------------------------------------*/
  12          
  13          #include  "STC8H_RTC.h"
  14          #include "BEEP.h"
  15          #include "LCD_DISPLAY.h"
  16          #include "LCD_BASE.h"
  17          #include "Picture.h"
  18          bit B_1S;
  19          bit B_Alarm;
  20          extern u8 touchKeyNum;
  21          extern u16 count;
  22          extern u8 state1;
  23          //========================================================================
  24          // 函数: RTC_ISR_Handler
  25          // 描述: RTC中断函数.
  26          // 参数: none.
  27          // 返回: none.
  28          // 版本: V1.0, 2022-03-21
  29          //========================================================================
  30          void RTC_ISR_Handler (void) interrupt RTC_VECTOR
  31          {
  32   1        // TODO: 在此处添加用户代码
  33   1        if(RTCIF & 0x80)    //闹钟中断
  34   1        {
  35   2          P01 = !P01;
  36   2          RTCIF &= ~0x80;
  37   2          B_Alarm = 1;
  38   2          count++;
  39   2          state1=2;
  40   2          if(count==0)
  41   2          {
  42   3            state1=1;
  43   3          }
  44   2        }
  45   1        if(RTCIF & 0x08)    //秒中断
  46   1        {
  47   2          P00 = !P00;
  48   2          RTCIF &= ~0x08;
  49   2          B_1S = 1;
  50   2        }
  51   1      }
  52          
  53          
C51 COMPILER V9.60.0.0   STC8H_RTC_ISR                                                     09/18/2025 19:01:35 PAGE 2   



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     78    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      2    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
