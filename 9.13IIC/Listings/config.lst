C51 COMPILER V9.60.0.0   CONFIG                                                            09/13/2025 19:44:19 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE CONFIG
OBJECT MODULE PLACED IN .\Objects\config.obj
COMPILER INVOKED BY: D:\work\KEIL\ARM\C51\BIN\C51.EXE APP\config.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\APP;.\DRIVER;.\STC8
                    -HLib) DEBUG OBJECTEXTEND PRINT(.\Listings\config.lst) TABS(2) OBJECT(.\Objects\config.obj)

line level    source

   1          #include  "STC8G_H_GPIO.h"
   2          #include  "STC8G_H_Exti.h"
   3          #include  "STC8G_H_NVIC.h"
   4          #include  "STC8G_H_Timer.h"
   5          #include  "STC8G_H_Switch.h"
   6          #include "STC8G_H_UART.h"
   7          #include  "STC8G_H_ADC.h"
   8          #include  "STC8G_H_I2C.h"
   9          void  GPIO_config(void)
  10          {
  11   1        GPIO_InitTypeDef  GPIO_InitStructure;   //½á¹¹¶¨Òå
  12   1      
  13   1        GPIO_InitStructure.Pin  = GPIO_Pin_All;
  14   1        GPIO_InitStructure.Mode = GPIO_PullUp;
  15   1        GPIO_Inilize(GPIO_P5,&GPIO_InitStructure);
  16   1        GPIO_Inilize(GPIO_P1,&GPIO_InitStructure);
  17   1        GPIO_Inilize(GPIO_P2,&GPIO_InitStructure);
  18   1        GPIO_Inilize(GPIO_P3,&GPIO_InitStructure);
  19   1        GPIO_Inilize(GPIO_P4,&GPIO_InitStructure);
  20   1        GPIO_Inilize(GPIO_P6,&GPIO_InitStructure);
  21   1        GPIO_Inilize(GPIO_P7,&GPIO_InitStructure);
  22   1      //  GPIO_InitStructure.Pin  = GPIO_Pin_All;   //Ö¸¶¨Òª³õÊ¼»¯µÄIO, GPIO_Pin_0 ~ GPIO_Pin_7
  23   1      //  GPIO_InitStructure.Mode = GPIO_PullUp;    //Ö¸¶¨IOµÄÊäÈë»òÊä³ö·½Ê½,GPIO_PullUp,GPIO_HighZ,GPIO_OUT_OD,GPI
             -O_OUT_PP
  24   1        GPIO_Inilize(GPIO_P0,&GPIO_InitStructure);  //³õÊ¼»¯
  25   1        P1_MODE_IN_HIZ(GPIO_Pin_0);   //P1.0~P1.7 ÉèÖÃÎª¸ß×èÊäÈë
  26   1      }
  27          /******************** INTÅäÖÃ ********************/
  28          void  Exti_config(void)
  29          {
  30   1        EXTI_InitTypeDef  Exti_InitStructure;             //½á¹¹¶¨Òå
  31   1      
  32   1        //Íâ²¿ÖÐ¶Ï0
  33   1        Exti_InitStructure.EXTI_Mode      = EXT_MODE_Fall;//ÖÐ¶ÏÄ£Ê½,   EXT_MODE_RiseFall,EXT_MODE_Fall
  34   1        Ext_Inilize(EXT_INT0,&Exti_InitStructure);        //³õÊ¼»¯
  35   1        NVIC_INT0_Init(ENABLE,Priority_0);    //ÖÐ¶ÏÊ¹ÄÜ, ENABLE/DISABLE; ÓÅÏÈ¼¶(µÍµ½¸ß) Priority_0,Priority_1,Prio
             -rity_2,Priority_3
  36   1      
  37   1        //Íâ²¿ÖÐ¶Ï1
  38   1        
  39   1        Exti_InitStructure.EXTI_Mode      = EXT_MODE_Fall;//ÖÐ¶ÏÄ£Ê½,   EXT_MODE_RiseFall,EXT_MODE_Fall
  40   1        Ext_Inilize(EXT_INT1,&Exti_InitStructure);        //³õÊ¼»¯
  41   1        NVIC_INT2_Init(ENABLE,Priority_0);    //ÖÐ¶ÏÊ¹ÄÜ, ENABLE/DISABLE; ÓÅÏÈ¼¶(µÍµ½¸ß) Priority_0,Priority_1,Prio
             -rity_2,Priority_3
  42   1      
  43   1        //Íâ²¿ÖÐ¶Ï2
  44   1        
  45   1      //  Exti_InitStructure.EXTI_Mode      = EXT_MODE_Fall;//ÖÐ¶ÏÄ£Ê½,   EXT_MODE_RiseFall,EXT_MODE_Fall
  46   1      //  Ext_Inilize(EXT_INT2,&Exti_InitStructure);        //³õÊ¼»¯
  47   1      //  NVIC_INT3_Init(ENABLE,Priority_0);    //ÖÐ¶ÏÊ¹ÄÜ, ENABLE/DISABLE; ÓÅÏÈ¼¶(µÍµ½¸ß) Priority_0,Priority_1,Pr
             -iority_2,Priority_3
  48   1      //  //Íâ²¿ÖÐ¶Ï3
  49   1      //  
  50   1      //  Exti_InitStructure.EXTI_Mode      = EXT_MODE_Fall;//ÖÐ¶ÏÄ£Ê½,   EXT_MODE_RiseFall,EXT_MODE_Fall
C51 COMPILER V9.60.0.0   CONFIG                                                            09/13/2025 19:44:19 PAGE 2   

  51   1      //  Ext_Inilize(EXT_INT3,&Exti_InitStructure);        //³õÊ¼»¯
  52   1      //  NVIC_INT4_Init(ENABLE,Priority_0);    //ÖÐ¶ÏÊ¹ÄÜ, ENABLE/DISABLE; ÓÅÏÈ¼¶(µÍµ½¸ß) Priority_0,Priority_1,Pr
             -iority_2,Priority_3
  53   1        
  54   1        NVIC_INT2_Init(ENABLE,NULL);    //ÖÐ¶ÏÊ¹ÄÜ, ENABLE/DISABLE; ÎÞÓÅÏÈ¼¶
  55   1        NVIC_INT3_Init(ENABLE,NULL);    //ÖÐ¶ÏÊ¹ÄÜ, ENABLE/DISABLE; ÎÞÓÅÏÈ¼¶
  56   1        NVIC_INT4_Init(ENABLE,NULL);    //ÖÐ¶ÏÊ¹ÄÜ, ENABLE/DISABLE; ÎÞÓÅÏÈ¼¶
  57   1        
  58   1        P3INTE|=0x30;
  59   1      
  60   1      }
  61          void  Timer_config(void)
  62          {
  63   1        TIM_InitTypeDef   TIM_InitStructure;            //½á¹¹¶¨Òå
  64   1      
  65   1        //¶¨Ê±Æ÷0×ö16Î»×Ô¶¯ÖØ×°, ÊµÏÖ500ms¶¨Ê±£¬¶¨Ê±1ms/fre=1000,ÖÐ¶Ï500´Î
  66   1        TIM_InitStructure.TIM_Mode      = TIM_16BitAutoReload;  //Ö¸¶¨¹¤×÷Ä£Ê½,   TIM_16BitAutoReload,TIM_16Bit,TI
             -M_8BitAutoReload,TIM_16BitAutoReloadNoMask
  67   1        TIM_InitStructure.TIM_ClkSource = TIM_CLOCK_1T;   //Ö¸¶¨Ê±ÖÓÔ´,     TIM_CLOCK_1T,TIM_CLOCK_12T,TIM_CLOCK_E
             -xt
  68   1        TIM_InitStructure.TIM_ClkOut    = DISABLE;        //ÊÇ·ñÊä³ö¸ßËÙÂö³å, ENABLE»òDISABLE
  69   1        TIM_InitStructure.TIM_Value     = 65536UL - (MAIN_Fosc / 1000UL);   //³õÖµ,
  70   1        TIM_InitStructure.TIM_Run       = ENABLE;       //ÊÇ·ñ³õÊ¼»¯ºóÆô¶¯¶¨Ê±Æ÷, ENABLE»òDISABLE
  71   1        Timer_Inilize(Timer0,&TIM_InitStructure);       //³õÊ¼»¯Timer0    Timer0,Timer1,Timer2,Timer3,Timer4
  72   1        NVIC_Timer0_Init(ENABLE,Priority_0);    //ÖÐ¶ÏÊ¹ÄÜ, ENABLE/DISABLE; ÓÅÏÈ¼¶(µÍµ½¸ß) Priority_0,Priority_1,Pr
             -iority_2,Priority_3
  73   1      
  74   1        //¶¨Ê±Æ÷1×ö16Î»×Ô¶¯ÖØ×°, ÖÐ¶ÏÆµÂÊÎª10000HZ£¬ÖÐ¶Ïº¯Êý´ÓP6.6È¡·´Êä³ö5KHZ·½²¨ÐÅºÅ.
  75   1        TIM_InitStructure.TIM_Mode      = TIM_16BitAutoReload;  //Ö¸¶¨¹¤×÷Ä£Ê½,   TIM_16BitAutoReload,TIM_16Bit,TI
             -M_8BitAutoReload,TIM_T1Stop
  76   1        TIM_InitStructure.TIM_ClkSource = TIM_CLOCK_1T;   //Ö¸¶¨Ê±ÖÓÔ´, TIM_CLOCK_1T,TIM_CLOCK_12T,TIM_CLOCK_Ext
  77   1        TIM_InitStructure.TIM_ClkOut    = DISABLE;        //ÊÇ·ñÊä³ö¸ßËÙÂö³å, ENABLE»òDISABLE
  78   1        TIM_InitStructure.TIM_Value     =65536UL - (MAIN_Fosc / 1000UL);// 65536UL - (MAIN_Fosc / 10000);     //³õÖ
             -µ,
  79   1        TIM_InitStructure.TIM_Run       = ENABLE;       //ÊÇ·ñ³õÊ¼»¯ºóÆô¶¯¶¨Ê±Æ÷, ENABLE»òDISABLE
  80   1        Timer_Inilize(Timer1,&TIM_InitStructure);       //³õÊ¼»¯Timer1    Timer0,Timer1,Timer2,Timer3,Timer4
  81   1        NVIC_Timer1_Init(ENABLE,Priority_0);    //ÖÐ¶ÏÊ¹ÄÜ, ENABLE/DISABLE; ÓÅÏÈ¼¶(µÍµ½¸ß) Priority_0,Priority_1,Pr
             -iority_2,Priority_3
  82   1      
  83   1        //¶¨Ê±Æ÷2×ö16Î»×Ô¶¯ÖØ×°, ÖÐ¶ÏÆµÂÊÎª1000HZ£¬ÖÐ¶Ïº¯Êý´ÓP6.5È¡·´Êä³ö500HZ·½²¨ÐÅºÅ.
  84   1        TIM_InitStructure.TIM_ClkSource = TIM_CLOCK_1T;   //Ö¸¶¨Ê±ÖÓÔ´,     TIM_CLOCK_1T,TIM_CLOCK_12T,TIM_CLOCK_E
             -xt
  85   1        TIM_InitStructure.TIM_ClkOut    = DISABLE;        //ÊÇ·ñÊä³ö¸ßËÙÂö³å, ENABLE»òDISABLE
  86   1        TIM_InitStructure.TIM_Value     = 65536UL - (MAIN_Fosc / 1000);       //³õÖµ
  87   1        TIM_InitStructure.TIM_PS        = 0;          //8Î»Ô¤·ÖÆµÆ÷(n+1), 0~255, (×¢Òâ:²¢·ÇËùÓÐÏµÁÐ¶¼ÓÐ´Ë¼Ä´æÆ÷,ÏêÇéÇë
             -²é¿´Êý¾ÝÊÖ²á)
  88   1        TIM_InitStructure.TIM_Run       = ENABLE;       //ÊÇ·ñ³õÊ¼»¯ºóÆô¶¯¶¨Ê±Æ÷, ENABLE»òDISABLE
  89   1        Timer_Inilize(Timer2,&TIM_InitStructure);       //³õÊ¼»¯Timer2    Timer0,Timer1,Timer2,Timer3,Timer4
  90   1        NVIC_Timer2_Init(ENABLE,NULL);    //ÖÐ¶ÏÊ¹ÄÜ, ENABLE/DISABLE; ÎÞÓÅÏÈ¼¶
  91   1      
  92   1        //¶¨Ê±Æ÷3×ö16Î»×Ô¶¯ÖØ×°, ÖÐ¶ÏÆµÂÊÎª100HZ£¬ÖÐ¶Ïº¯Êý´ÓP6.4È¡·´Êä³ö50HZ·½²¨ÐÅºÅ.
  93   1        TIM_InitStructure.TIM_ClkSource = TIM_CLOCK_12T;  //Ö¸¶¨Ê±ÖÓÔ´,     TIM_CLOCK_1T,TIM_CLOCK_12T,TIM_CLOCK_E
             -xt
  94   1        TIM_InitStructure.TIM_ClkOut    = DISABLE;        //ÊÇ·ñÊä³ö¸ßËÙÂö³å, ENABLE»òDISABLE
  95   1        TIM_InitStructure.TIM_Value     = 65536UL - (MAIN_Fosc / (100*12));   //³õÖµ
  96   1        TIM_InitStructure.TIM_PS        = 0;          //8Î»Ô¤·ÖÆµÆ÷(n+1), 0~255, (×¢Òâ:²¢·ÇËùÓÐÏµÁÐ¶¼ÓÐ´Ë¼Ä´æÆ÷,ÏêÇéÇë
             -²é¿´Êý¾ÝÊÖ²á)
  97   1        TIM_InitStructure.TIM_Run       = ENABLE;       //ÊÇ·ñ³õÊ¼»¯ºóÆô¶¯¶¨Ê±Æ÷, ENABLE»òDISABLE
  98   1        Timer_Inilize(Timer3,&TIM_InitStructure);       //³õÊ¼»¯Timer3    Timer0,Timer1,Timer2,Timer3,Timer4
  99   1        NVIC_Timer3_Init(ENABLE,NULL);    //ÖÐ¶ÏÊ¹ÄÜ, ENABLE/DISABLE; ÎÞÓÅÏÈ¼¶
 100   1      
 101   1        //¶¨Ê±Æ÷4×ö16Î»×Ô¶¯ÖØ×°, ÖÜÆÚ10ms,ÖÐ¶ÏÆµÂÊÎª100HZ£¬100Ô¤·ÖÆµ..
C51 COMPILER V9.60.0.0   CONFIG                                                            09/13/2025 19:44:19 PAGE 3   

 102   1        TIM_InitStructure.TIM_ClkSource = TIM_CLOCK_12T;  //Ö¸¶¨Ê±ÖÓÔ´,     TIM_CLOCK_1T,TIM_CLOCK_12T,TIM_CLOCK_E
             -xt
 103   1        TIM_InitStructure.TIM_ClkOut    = DISABLE;        //ÊÇ·ñÊä³ö¸ßËÙÂö³å, ENABLE»òDISABLE
 104   1        TIM_InitStructure.TIM_Value     = 65536UL - (MAIN_Fosc / (100*12));   //³õÖµ
 105   1        TIM_InitStructure.TIM_PS        = 0;          //8Î»Ô¤·ÖÆµÆ÷(n+1), 0~255, (×¢Òâ:²¢·ÇËùÓÐÏµÁÐ¶¼ÓÐ´Ë¼Ä´æÆ÷,ÏêÇéÇë
             -²é¿´Êý¾ÝÊÖ²á)
 106   1        TIM_InitStructure.TIM_Run       = ENABLE;       //ÊÇ·ñ³õÊ¼»¯ºóÆô¶¯¶¨Ê±Æ÷, ENABLE»òDISABLE
 107   1        Timer_Inilize(Timer4,&TIM_InitStructure);       //³õÊ¼»¯Timer4    Timer0,Timer1,Timer2,Timer3,Timer4
 108   1        NVIC_Timer4_Init(ENABLE,NULL);    //ÖÐ¶ÏÊ¹ÄÜ, ENABLE/DISABLE; ÎÞÓÅÏÈ¼¶
 109   1      }
 110          
 111          void  UART_config(void)
 112          {
 113   1        COMx_InitDefine   COMx_InitStructure;         //½á¹¹¶¨Òå
 114   1      
 115   1        COMx_InitStructure.UART_Mode      = UART_8bit_BRTx; //Ä£Ê½, UART_ShiftRight,UART_8bit_BRTx,UART_9bit,UART
             -_9bit_BRTx
 116   1        COMx_InitStructure.UART_BRT_Use   = BRT_Timer1;     //Ñ¡Ôñ²¨ÌØÂÊ·¢ÉúÆ÷, BRT_Timer1, BRT_Timer2 (×¢Òâ: ´®¿Ú2
             -¹Ì¶¨Ê¹ÓÃBRT_Timer2)
 117   1        COMx_InitStructure.UART_BaudRate  = 115200ul;     //²¨ÌØÂÊ, Ò»°ã 110 ~ 115200
 118   1        COMx_InitStructure.UART_RxEnable  = ENABLE;       //½ÓÊÕÔÊÐí,   ENABLE»òDISABLE
 119   1        COMx_InitStructure.BaudRateDouble = DISABLE;      //²¨ÌØÂÊ¼Ó±¶, ENABLE»òDISABLE
 120   1        UART_Configuration(UART1, &COMx_InitStructure);   //³õÊ¼»¯´®¿Ú1 UART1,UART2,UART3,UART4
 121   1        NVIC_UART1_Init(ENABLE,Priority_1);   //ÖÐ¶ÏÊ¹ÄÜ, ENABLE/DISABLE; ÓÅÏÈ¼¶(µÍµ½¸ß) Priority_0,Priority_1,Pri
             -ority_2,Priority_3
 122   1      
 123   1        COMx_InitStructure.UART_Mode      = UART_8bit_BRTx;   //Ä£Ê½,   UART_ShiftRight,UART_8bit_BRTx,UART_9bit,U
             -ART_9bit_BRTx
 124   1      //  COMx_InitStructure.UART_BRT_Use   = BRT_Timer2;     //Ñ¡Ôñ²¨ÌØÂÊ·¢ÉúÆ÷, BRT_Timer2 (×¢Òâ: ´®¿Ú2¹Ì¶¨Ê¹ÓÃBR
             -T_Timer2, ËùÒÔ²»ÓÃÑ¡Ôñ)
 125   1        COMx_InitStructure.UART_BaudRate  = 115200ul;     //²¨ÌØÂÊ,     110 ~ 115200
 126   1        COMx_InitStructure.UART_RxEnable  = ENABLE;       //½ÓÊÕÔÊÐí,   ENABLE»òDISABLE
 127   1        UART_Configuration(UART2, &COMx_InitStructure);   //³õÊ¼»¯´®¿Ú2 UART1,UART2,UART3,UART4
 128   1        NVIC_UART2_Init(ENABLE,Priority_1);   //ÖÐ¶ÏÊ¹ÄÜ, ENABLE/DISABLE; ÓÅÏÈ¼¶(µÍµ½¸ß) Priority_0,Priority_1,Pri
             -ority_2,Priority_3
 129   1      
 130   1        UART1_SW(UART1_SW_P30_P31);   //UART1_SW_P30_P31,UART1_SW_P36_P37,UART1_SW_P16_P17,UART1_SW_P43_P44
 131   1        UART2_SW(UART2_SW_P46_P47);   //UART2_SW_P10_P11,UART2_SW_P46_P47
 132   1      }
 133          /******************* ADÅäÖÃº¯Êý *******************/
 134          void  ADC_config(void)
 135          {
 136   1        ADC_InitTypeDef   ADC_InitStructure;    //½á¹¹¶¨Òå
 137   1      
 138   1        ADC_InitStructure.ADC_SMPduty   = 31;   //ADC Ä£ÄâÐÅºÅ²ÉÑùÊ±¼ä¿ØÖÆ, 0~31£¨×¢Òâ£º SMPDUTY Ò»¶¨²»ÄÜÉèÖÃÐ¡ÓÚ 
             -10£©
 139   1        ADC_InitStructure.ADC_CsSetup   = 0;    //ADC Í¨µÀÑ¡ÔñÊ±¼ä¿ØÖÆ 0(Ä¬ÈÏ),1
 140   1        ADC_InitStructure.ADC_CsHold    = 1;    //ADC Í¨µÀÑ¡Ôñ±£³ÖÊ±¼ä¿ØÖÆ 0,1(Ä¬ÈÏ),2,3
 141   1        ADC_InitStructure.ADC_Speed     = ADC_SPEED_2X16T;    //ÉèÖÃ ADC ¹¤×÷Ê±ÖÓÆµÂÊ ADC_SPEED_2X1T~ADC_SPEED_2X16
             -T
 142   1        ADC_InitStructure.ADC_AdjResult = ADC_RIGHT_JUSTIFIED;  //ADC½á¹ûµ÷Õû,  ADC_LEFT_JUSTIFIED,ADC_RIGHT_JUSTIF
             -IED
 143   1        ADC_Inilize(&ADC_InitStructure);    //³õÊ¼»¯
 144   1        ADC_PowerControl(ENABLE);       //ADCµçÔ´¿ª¹Ø, ENABLE»òDISABLE
 145   1        NVIC_ADC_Init(DISABLE,Priority_0);    //ÖÐ¶ÏÊ¹ÄÜ, ENABLE/DISABLE; ÓÅÏÈ¼¶(µÍµ½¸ß) Priority_0,Priority_1,Prio
             -rity_2,Priority_3
 146   1      }
 147          /************************ ¶¨Ê±Æ÷ÅäÖÃ ****************************/
 148          /****************  I2C³õÊ¼»¯º¯Êý *****************/
 149          void  I2C_config(void)
 150          {
 151   1        I2C_InitTypeDef   I2C_InitStructure;
C51 COMPILER V9.60.0.0   CONFIG                                                            09/13/2025 19:44:19 PAGE 4   

 152   1      
 153   1        I2C_InitStructure.I2C_Mode      = I2C_Mode_Master;  //Ö÷´ÓÑ¡Ôñ   I2C_Mode_Master, I2C_Mode_Slave
 154   1        I2C_InitStructure.I2C_Enable    = ENABLE;     //I2C¹¦ÄÜÊ¹ÄÜ,   ENABLE, DISABLE
 155   1        I2C_InitStructure.I2C_MS_WDTA   = DISABLE;      //Ö÷»úÊ¹ÄÜ×Ô¶¯·¢ËÍ,  ENABLE, DISABLE
 156   1        I2C_InitStructure.I2C_Speed     = 16;       //×ÜÏßËÙ¶È=Fosc/2/(Speed*2+4),      0~63
 157   1        I2C_Init(&I2C_InitStructure);
 158   1        NVIC_I2C_Init(I2C_Mode_Master,DISABLE,Priority_0);  //Ö÷´ÓÄ£Ê½, I2C_Mode_Master, I2C_Mode_Slave; ÖÐ¶ÏÊ¹ÄÜ,
             - ENABLE/DISABLE; ÓÅÏÈ¼¶(µÍµ½¸ß) Priority_0,Priority_1,Priority_2,Priority_3
 159   1      
 160   1        I2C_SW(I2C_P24_P25);          //I2C_P14_P15,I2C_P24_P25,I2C_P33_P32
 161   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    498    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      30
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
